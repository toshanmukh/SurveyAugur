(self.webpackChunksurveyaugur_webapp=self.webpackChunksurveyaugur_webapp||[]).push([[324],{768:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SurveysModule:()=>H});var o=i(8583),s=i(1095),n=i(4655),r=i(2789),u=i(5304),a=i(205),c=i(2238),l=i(7716),d=i(1841),h=i(2199),v=i(5939);function p(e,t){1&e&&(l.TgZ(0,"th",16),l._uU(1,"SNo. "),l.qZA())}function y(e,t){if(1&e&&(l.TgZ(0,"td",17),l._uU(1),l.qZA()),2&e){const e=t.index;l.xp6(1),l.hij(" ",e+1," ")}}function g(e,t){1&e&&(l.TgZ(0,"th",16),l._uU(1," SurveyTitle "),l.qZA())}function m(e,t){if(1&e&&(l.TgZ(0,"td",17),l.TgZ(1,"b"),l._uU(2),l.qZA(),l._UZ(3,"br"),l._uU(4),l.qZA()),2&e){const e=t.$implicit;l.xp6(2),l.Oqu(e.surveyTitle),l.xp6(2),l.hij("",e.surveyUrl," ")}}function f(e,t){1&e&&(l.TgZ(0,"th",16),l._uU(1," ActivatedOn "),l.qZA())}function S(e,t){if(1&e&&(l.TgZ(0,"td",17),l._uU(1),l.ALo(2,"date"),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.hij(" ",l.xi3(2,1,e.activatedOn,"medium")," ")}}function T(e,t){1&e&&(l.TgZ(0,"th",16),l._uU(1," Actions "),l.qZA())}function Z(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"td",17),l.TgZ(1,"button",18),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(2).openDialogActiveSurvey(t.surveyId)}),l._uU(2,"DeActivate"),l.qZA(),l.qZA()}}function b(e,t){1&e&&l._UZ(0,"tr",19)}function w(e,t){1&e&&l._UZ(0,"tr",20)}function A(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"table",7),l.ynx(2,8),l.YNc(3,p,2,0,"th",9),l.YNc(4,y,2,1,"td",10),l.BQk(),l.ynx(5,11),l.YNc(6,g,2,0,"th",9),l.YNc(7,m,5,2,"td",10),l.BQk(),l.ynx(8,12),l.YNc(9,f,2,0,"th",9),l.YNc(10,S,3,4,"td",10),l.BQk(),l.ynx(11,13),l.YNc(12,T,2,0,"th",9),l.YNc(13,Z,3,0,"td",10),l.BQk(),l.YNc(14,b,1,0,"tr",14),l.YNc(15,w,1,0,"tr",15),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("dataSource",e.dataSource),l.xp6(13),l.Q6J("matHeaderRowDef",e.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",e.displayedColumns)}}function q(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"h1",21),l._uU(2,"No Active Survey Found "),l.qZA(),l.qZA(),l.TgZ(3,"div",22),l._UZ(4,"img",23),l.qZA())}function x(e,t){1&e&&(l.TgZ(0,"th",16),l._uU(1,"SNo. "),l.qZA())}function _(e,t){if(1&e&&(l.TgZ(0,"td",17),l._uU(1),l.qZA()),2&e){const e=t.index;l.xp6(1),l.hij(" ",e+1," ")}}function k(e,t){1&e&&(l.TgZ(0,"th",16),l._uU(1," Survey Title "),l.qZA())}function I(e,t){if(1&e&&(l.TgZ(0,"td",17),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.hij(" ",e.title," ")}}function C(e,t){1&e&&(l.TgZ(0,"th",16),l._uU(1," Created On "),l.qZA())}function U(e,t){if(1&e&&(l.TgZ(0,"td",17),l._uU(1),l.ALo(2,"date"),l.qZA()),2&e){const e=t.$implicit;l.xp6(1),l.hij(" ",l.xi3(2,1,e.createdOn,"medium")," ")}}function N(e,t){1&e&&(l.TgZ(0,"th",16),l._uU(1," Actions "),l.qZA())}function Y(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"td",17),l.TgZ(1,"button",18),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(2).openDialogInactiveSurvey(t.id)}),l._uU(2,"Activate"),l.qZA(),l.qZA()}}function B(e,t){1&e&&l._UZ(0,"tr",19)}function Q(e,t){1&e&&l._UZ(0,"tr",20)}function O(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"table",7),l.ynx(2,8),l.YNc(3,x,2,0,"th",9),l.YNc(4,_,2,1,"td",10),l.BQk(),l.ynx(5,11),l.YNc(6,k,2,0,"th",9),l.YNc(7,I,2,1,"td",10),l.BQk(),l.ynx(8,12),l.YNc(9,C,2,0,"th",9),l.YNc(10,U,3,4,"td",10),l.BQk(),l.ynx(11,13),l.YNc(12,N,2,0,"th",9),l.YNc(13,Y,3,0,"td",10),l.BQk(),l.YNc(14,B,1,0,"tr",14),l.YNc(15,Q,1,0,"tr",15),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("dataSource",e.dataSource1),l.xp6(13),l.Q6J("matHeaderRowDef",e.displayedColumns),l.xp6(1),l.Q6J("matRowDefColumns",e.displayedColumns)}}const D=function(){return["/home/createsurvey"]};function J(e,t){1&e&&(l.TgZ(0,"h3"),l._uU(1,"No InActive Surveys Found!!!!!!"),l.qZA(),l.TgZ(2,"div",24),l._uU(3,"CREATE SURVEY"),l.qZA()),2&e&&(l.xp6(2),l.Q6J("routerLink",l.DdM(1,D)))}let M=(()=>{class e{constructor(e,t,i,o){this.http=e,this.user=t,this.router=i,this.dialog=o,this.displayedColumns=["position","name","updates","Actions"],this.activeById=[],this.inactiveSurvey=[],this.activeSurvey=[],this.question=[],this.iQuestion=[]}ngOnInit(){this.getInctiveSurveys(),this.getActiveSurveys()}getById(){for(let e=0;e<this.activeSurvey.length;e++)this.activeSurvey[e].createdBy===this.user.userId&&this.activeById.push(this.activeSurvey[e])}getInctiveSurveys(){this.http.get("/surveyauthor/api/v1/surveys/users/"+this.user.userId).pipe((0,u.K)(this.handleError)).subscribe(e=>{this.inactiveSurvey=[],this.inactiveSurvey=e.result,console.log(e),console.log(this.inactiveSurvey),this.dataSource1=new r.by(this.inactiveSurvey)},e=>{console.log(e),this.router.navigateByUrl("/error",{state:{errorCode:e}})})}getActiveSurveys(){this.http.get("/surveyengine/api/v1/surveys").pipe((0,u.K)(this.handleError)).subscribe(e=>{console.log(e.result),this.activeSurvey=e.result,console.log(this.activeSurvey),this.activeById=[],this.getById(),console.log(this.activeById),this.dataSource=new r.by(this.activeById)},e=>{console.log(e),this.router.navigateByUrl("/error",{state:{errorCode:e}})})}handleError(e){return(0,a._)(e.status)}inactiveSurveyToActiveSurvey(){this.http.get("/surveyauthor/api/v1/surveys/"+this.surveyId).subscribe(e=>{this.iSurveyTemp=e.result}),setTimeout(()=>{this.addSurveyToActiveSurvey()},600)}addSurveyToActiveSurvey(){this.iQuestionToAQuestion(),this.body={surveyTitle:this.iSurveyTemp.title,tags:this.iSurveyTemp.tags,description:this.iSurveyTemp.description,targetAudience:this.iSurveyTemp.targetAudience,activeTime:this.iSurveyTemp.activeTime,createdBy:this.iSurveyTemp.createdBy,questions:this.question,uiSetting:null,surveyUrl:null,activatedBy:this.user.userId,createdOn:this.iSurveyTemp.createdOn},this.header={"content-type":"application/json"},this.http.post("/surveyengine/api/v1/surveys",this.body,{headers:this.header}).subscribe(e=>{200==e.status&&this.deleteSurveyFromInactiveSurvey()},e=>{console.log("Error Ocurred While Post",e)})}iQuestionToAQuestion(){this.question=[];for(let e=0;e<this.iSurveyTemp.questions.length;e++)this.question.push({id:this.iSurveyTemp.questions[e].id,questionBody:this.iSurveyTemp.questions[e].questionBody,questionType:this.iSurveyTemp.questions[e].questionType,options:this.iSurveyTemp.questions[e].options})}deleteSurveyFromInactiveSurvey(){this.http.delete("/surveyauthor/api/v1/surveys/"+this.surveyId).subscribe(e=>{200==e.status&&(console.log("deleted successfully"),setTimeout(()=>{this.getActiveSurveys(),this.getInctiveSurveys()},700))},e=>{console.log("Error Ocurred While Delete",e)})}activeSurveyToInactiveSurvey(){this.http.get("/surveyengine/api/v1/surveys/"+this.activeSurveyId).subscribe(e=>{this.aSurveyTemp=e.result}),setTimeout(()=>{this.addSurveyToInctiveSurvey()},600)}addSurveyToInctiveSurvey(){this.aQuestionToIQuestion(),this.iSurveyBody={title:this.aSurveyTemp.surveyTitle,tags:this.aSurveyTemp.tags,description:this.aSurveyTemp.description,targetAudience:this.aSurveyTemp.targetAudience,surveyType:this.aSurveyTemp.surveyType,activeTime:this.aSurveyTemp.activeTime,questions:this.iQuestion,uiSetting:null,createdBy:this.aSurveyTemp.createdBy},this.header={"content-type":"application/json"},this.http.post("/surveyauthor/api/v1/surveys/users/"+this.user.userId,this.iSurveyBody,{headers:this.header}).subscribe(e=>{200==e.status&&this.deleteSurveyFromActiveSurvey()},e=>{console.log("Error Ocurred While Post",e)})}aQuestionToIQuestion(){this.iQuestion=[];for(let e=0;e<this.aSurveyTemp.questions.length;e++)this.iQuestion.push({id:this.aSurveyTemp.questions[e].id,questionBody:this.aSurveyTemp.questions[e].questionBody,questionType:this.aSurveyTemp.questions[e].questionType,options:this.aSurveyTemp.questions[e].options})}deleteSurveyFromActiveSurvey(){this.http.delete("/surveyengine/api/v1/surveys/"+this.aSurveyTemp.surveyId).subscribe(e=>{200==e.status&&(console.log("deleted successfully"),setTimeout(()=>{this.getActiveSurveys(),this.getInctiveSurveys()},700))},e=>{console.log("Error Ocurred While Delete",e)})}openDialogInactiveSurvey(e){this.surveyId=null,this.flag=null,this.surveyId=e,this.dialog.open(j,{width:"300px"}).afterClosed().subscribe(e=>{console.log(e),this.flag=e,1==this.flag&&this.inactiveSurveyToActiveSurvey()})}openDialogActiveSurvey(e){this.activeSurveyId=null,this.flag=null,this.activeSurveyId=e,this.dialog.open(P,{width:"300px"}).afterClosed().subscribe(e=>{console.log(e),this.flag=e,1==this.flag&&this.activeSurveyToInactiveSurvey()})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(d.eN),l.Y36(h._),l.Y36(n.F0),l.Y36(c.uw))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-surveys"]],decls:16,vars:4,consts:[[1,"sub-heading"],[2,"width","100%"],["label","Active Surveys"],[4,"ngIf","ngIfElse"],["elseBlock",""],["label","InActive Surveys"],["elseBlock1",""],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","class","tableHeader",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","updates"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"tableHeader"],["mat-cell",""],["mat-raised-button","","color","primary",2,"width","7em",3,"click"],["mat-header-row",""],["mat-row",""],[2,"font-size","xx-large","margin-bottom","1%","margin-left","35%","margin-top","10%"],[2,"margin-top","2%","margin-left","30%"],["src","assets/images/sad-emoji.png","alt","",2,"position","absolute"],[1,"create-survey",3,"routerLink"]],template:function(e,t){if(1&e&&(l.TgZ(0,"p",0),l._uU(1,"Surveys"),l.qZA(),l._UZ(2,"hr",1),l.TgZ(3,"mat-tab-group"),l.TgZ(4,"mat-tab",2),l._UZ(5,"br"),l._UZ(6,"br"),l.YNc(7,A,16,3,"div",3),l.YNc(8,q,5,0,"ng-template",null,4,l.W1O),l.qZA(),l.TgZ(10,"mat-tab",5),l._UZ(11,"br"),l._UZ(12,"br"),l.YNc(13,O,16,3,"div",3),l.YNc(14,J,4,2,"ng-template",null,6,l.W1O),l.qZA(),l.qZA()),2&e){const e=l.MAs(9),i=l.MAs(15);l.xp6(7),l.Q6J("ngIf",t.dataSource.filteredData.length>0)("ngIfElse",e),l.xp6(6),l.Q6J("ngIf",t.dataSource1.filteredData.length>0)("ngIfElse",i)}},directives:[v.SP,v.uX,o.O5,r.BZ,r.w1,r.fO,r.Dz,r.as,r.nj,r.ge,r.ev,s.lW,r.XQ,r.Gk,n.rH],pipes:[o.uU],styles:[".sub-heading[_ngcontent-%COMP%]{font-size:18px;font-weight:700;font-family:Roboto}.mat-tab-lables[_ngcontent-%COMP%]{flex:50%;flex-wrap:wrap;justify-content:space-around;align-content:stretch;align-items:baseline;flex-direction:row}.Active[_ngcontent-%COMP%]   Surveys[_ngcontent-%COMP%]   .div[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:blue}table[_ngcontent-%COMP%]{width:100%}.tableHeader[_ngcontent-%COMP%]{background-color:#1e90ff;font-size:medium;justify-content:center}.mat-column-position[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 0%!important;width:20%!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.mat-column-Actions[_ngcontent-%COMP%], .mat-column-name[_ngcontent-%COMP%]{justify-content:center}.mat-column-Actions[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 0%!important;width:20%!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.create-survey[_ngcontent-%COMP%]{background-color:green;color:#fff;height:40px;width:150px;display:flex;justify-content:center;align-items:center;margin-right:200px;margin-top:100px}"]}),e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),j=(()=>{class e{constructor(e,t){this.data=e,this.dialogRef=t}onNoClick(){this.dialogRef.close()}onYesClick(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(c.WI),l.Y36(c.so))},e.\u0275cmp=l.Xpm({type:e,selectors:[["dialog-box-activate"]],decls:8,vars:2,consts:[["mat-dialog-title","",2,"font-size","large","font-weight","bold"],["mat-dialog-actions","",2,"display","flex","flex-direction","row","justify-content","space-between"],["mat-button","",2,"background-color","#3f51b5","color","white","height","3em","width","8em",3,"mat-dialog-close","click"],["mat-button","",2,"height","3em","width","8em",3,"mat-dialog-close","click"]],template:function(e,t){1&e&&(l.TgZ(0,"p",0),l._uU(1,"Do you wish to activate survey."),l.qZA(),l.TgZ(2,"div",1),l.TgZ(3,"button",2),l.NdJ("click",function(){return t.onYesClick}),l._uU(4,"Yes"),l.qZA(),l._uU(5,"\xa0 "),l.TgZ(6,"button",3),l.NdJ("click",function(){return t.onNoClick()}),l._uU(7,"No"),l.qZA(),l.qZA()),2&e&&(l.xp6(3),l.Q6J("mat-dialog-close",!0),l.xp6(3),l.Q6J("mat-dialog-close",!1))},directives:[c.uh,c.H8,s.lW,c.ZT],encapsulation:2}),e})(),P=(()=>{class e{constructor(e,t){this.data=e,this.dialogRef=t}onNoClick(){this.dialogRef.close()}onYesClick(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(c.WI),l.Y36(c.so))},e.\u0275cmp=l.Xpm({type:e,selectors:[["dialog-box-deactivate"]],decls:8,vars:2,consts:[["mat-dialog-title","",2,"font-size","large","font-weight","bold"],["mat-dialog-actions","",2,"display","flex","flex-direction","row","justify-content","space-between"],["mat-button","",2,"background-color","#3f51b5","color","white","height","3em","width","8em",3,"mat-dialog-close","click"],["mat-button","",2,"height","3em","width","8em",3,"mat-dialog-close","click"]],template:function(e,t){1&e&&(l.TgZ(0,"p",0),l._uU(1,"Do you wish to deactivate survey."),l.qZA(),l.TgZ(2,"div",1),l.TgZ(3,"button",2),l.NdJ("click",function(){return t.onYesClick}),l._uU(4,"Yes"),l.qZA(),l._uU(5,"\xa0 "),l.TgZ(6,"button",3),l.NdJ("click",function(){return t.onNoClick()}),l._uU(7,"No"),l.qZA(),l.qZA()),2&e&&(l.xp6(3),l.Q6J("mat-dialog-close",!0),l.xp6(3),l.Q6J("mat-dialog-close",!1))},directives:[c.uh,c.H8,s.lW,c.ZT],encapsulation:2}),e})();const R=[{path:"",component:M}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.Bz.forChild(R)],n.Bz]}),e})(),H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[o.ez,E,v.Nh,d.JF,s.ot,r.p0,c.Is]]}),e})()}}]);